using System.Text.RegularExpressions; namespace Dialogus.Core; public static class Template{ static readonly Regex Placeholder=new("\\{([a-zA-Z_][a-zA-Z0-9_]*)\\}",RegexOptions.Compiled); public static string Apply(string text, VariableStore store)=>Placeholder.Replace(text,m=>{var key=m.Groups[1].Value; return store.TryGet(key,out var v)? v switch{ Value.Str s=>s.V, Value.Num n=>n.V.ToString(), Value.Bool b=>b.V?"true":"false", _=>string.Empty}:string.Empty;}); }